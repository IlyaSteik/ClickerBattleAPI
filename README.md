# ClickerBattleAPI
NodeJS библиотека для работы с API приложения «Битва Кликеров».

# Установка
```
npm i @uly4nov/clickerbattle-api
```

# Подключение
```
const
    {API} = require('@uly4nov/clickerbattle-api'),
    clicker = new API('YOUR_API_TOKEN');
```

# Пример работы
```
console.log(await clicker.users.get) // Выведет объект пользователя
console.log(await clicker.users.transfer(245481845, 1)) // Выведет true (Если на счету больше 0 кликов)
```

# Методы

## users.get

**Описание:**

Получение данных пользователя

**Ответ:**

```
{
    id: <идентификатор_vk>,
    clicks: <клики>,
    lvl: <уровень>,
    xp: <опыт>,
    wins: <победы>,
    loses: <поражения>,
    energy: <энергия>,
    persons: <персонажи>,
    activePerson: <активный_персонаж>,
    activeSkins: <активные_скины>,
    banners: <баннеры>,
    bannerChanged: <установленный_баннер>,
    bannersStat: <элементы_статистики_баннера>,
    bannerStatChanged: <установленный_элемент_статистики_баннера>,
    cursors: <курсоры>,
    cursorChanged: <установленный_курсор>,
    bp: <есть_ли_боевой_пропуск>,
    bpLvl: <уровень_боевого_пропуска>,
    bpXp: <опыт_боевого_пропуска>,
    caseStandart: <количество_обычных_кейсов>,
    caseEpic: <количество_эпических_кейсов>,
    caseLeg: <количество_легендарных_кейсов>,
    caseMystic: <количество_мистических_кейсов>,
    lastCaseGot: <последний_уровень_за_который_был_получен_кейс>,
    ref: <чей_вы_реферал>,
    refs: <ваши_рефералы>,
    tr: <количество_кликов_переведённых_за_день>,
    trHistory: <история_переводов>,
    day: <ваша_статистика_за_день>,
    apiToken: <ваш_токен>,
    banned: <статус_блокировки>,
    banReason: <причина_блокировки>,
    name: <ваше_имя>,
    photo: <ваше_фото>,
    unbanBought: <сколько_разбанов_было_куплено>,
    kpsArray: <массив_с_кпс_по_всем_играм> 
}
```

## users.getDay

**Описание:**

Топ всех игроков за день

**Ответ:**

```
[ 
    …<игроки>
]
```

## users.transfer

**Описание:**

Перевод кликов игроку

**Параметры:**

| Параметр | Тип  | Описание                       |
|----------|------|--------------------------------|
|user_id   |number|Идентификатор (vk_id) получателя

**Ответ:**

```
true
```

При выполнении запроса могут возникнуть следующие ошибки: 1, 2, 3, 4, 5, 6.

## bill.create

**Описание:**

Создать счет для оплаты

**Параметры:**

| Параметр | Тип  | Описание                        |
|----------|------|---------------------------------|
|user_id   |number|Идентификатор (vk_id) плательщика|
|amount    |number|Количество кликов                |

**Ответ:**

```
{
    fromId: <id_плательщика>,
    toId: <id_получателя>,
    amount: <количество_кликов>,
    id: <идентификатор_счёта>,
    success: <статус_оплаты>,
    url: <ссылка_для_оплаты>
}
```

## bill.getById

**Описание:**

Получить информацию о счёте

**Параметры:**

| Параметр | Тип  | Описание          |
|----------|----- |-------------------|
|bill_id   |number|Идентификатор счета|

**Ответ:**

```
{
    fromId: <id_плательщика>,
    toId: <id_получателя>,
    amount: <количество_кликов>,
    id: <идентификатор_счёта>,
    success: <статус_оплаты>,
    url: <ссылка_для_оплаты>
}
```

## callback.setUrl

**Описание:**

Установить адрес Callback API

**Параметры:**

| Параметр | Тип  | Описание                   |
|----------|----- |----------------------------|
|url       |string|Ссылка для получения событий|


**Ответ:**

```
true
```

**События:**

| Название | Параметры                                                      | Описание события     |
|----------|----------------------------------------------------------------|----------------------|
|transfer  |```{ fromId: <от_кого_платёж>, amount: <количество_кликов> }``` |Поступил новый перевод|

**Пример нового события:**
```
{
    event: 'transfer',
    transfer: {
        fromId: 245481845,
        amount: 100
    }
}
```